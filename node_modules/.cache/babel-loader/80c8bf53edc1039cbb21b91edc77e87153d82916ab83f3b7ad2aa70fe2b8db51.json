{"ast":null,"code":"var _jsxFileName = \"/home/innofied/Desktop/Hackathon/src/components/Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Calendar from './Calendar';\nimport Event from './Event';\nimport CreateEvent from './CreateEvent';\n\n// Import fireStore reference from firebaseInit file\nimport { db } from '../firebase-init';\n\n// Import all the required functions from fireStore\nimport { collection, getDocs, where, query, deleteDoc } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = ({\n  currentUser\n}) => {\n  _s();\n  const [events, setEvents] = useState();\n  const [selfEvents, setSelfEvents] = useState();\n  const [activeTab, setActiveTab] = useState('managing');\n\n  // Function to fetch events data from the \"Events\" collection based on event IDs\n  const fetchEventsData = async (eventIDs = []) => {\n    const eventsData = [];\n    for (const eventId of eventIDs) {\n      try {\n        const eventsCollection = collection(db, 'Events');\n        const q = query(eventsCollection, where('uid', '==', currentUser.uid));\n        const querySnapshot = await getDocs(q);\n        querySnapshot.forEach(doc => {\n          eventsData.push({\n            ...doc.data(),\n            id: doc.id\n          });\n        });\n      } catch (error) {\n        console.error('Error fetching events data:', error);\n      }\n    }\n    return eventsData;\n  };\n\n  // Function to handle event deletion\n  const handleEventDelete = async eventId => {\n    try {\n      // Delete the event from the \"managed\" array in the user document\n      const userDocRef = collection(db, 'Users', currentUser.uid);\n      await deleteDoc(userDocRef);\n\n      // Fetch and update the self-managed events data\n      const updatedSelfEvents = await fetchEventsData(currentUser.events);\n      setSelfEvents(updatedSelfEvents);\n\n      // Fetch and update the attended events data\n      const updatedAttendedEvents = await fetchEventsData(currentUser.attended);\n      setEvents(updatedAttendedEvents);\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n  const handleTabChange = tab => {\n    setActiveTab(tab);\n  };\n  useEffect(() => {\n    // Fetch attended events data\n    fetchEventsData(currentUser.attended).then(eventsData => {\n      setEvents(eventsData);\n    });\n\n    // Fetch self-managed events data\n    fetchEventsData(currentUser.events).then(eventsData => {\n      setSelfEvents(eventsData);\n    });\n  }, [currentUser]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-tabs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: [activeTab === 'managing' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: selfEvents && selfEvents.map((event, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(Event, {\n            event: event,\n            onDelete: () => handleEventDelete(event.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 19\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), activeTab === 'attending' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: events && events.map((event, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(Event, {\n            event: event,\n            onDelete: () => handleEventDelete(event.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), activeTab === 'upcoming' && /*#__PURE__*/_jsxDEV(Calendar, {\n        user: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 38\n      }, this), activeTab === 'create' && /*#__PURE__*/_jsxDEV(CreateEvent, {\n        user: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"pX7eGZaHjMWMeixQzO43KKc0WMI=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","Calendar","Event","CreateEvent","db","collection","getDocs","where","query","deleteDoc","jsxDEV","_jsxDEV","Profile","currentUser","_s","events","setEvents","selfEvents","setSelfEvents","activeTab","setActiveTab","fetchEventsData","eventIDs","eventsData","eventId","eventsCollection","q","uid","querySnapshot","forEach","doc","push","data","id","error","console","handleEventDelete","userDocRef","updatedSelfEvents","updatedAttendedEvents","attended","handleTabChange","tab","then","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","event","index","onDelete","user","_c","$RefreshReg$"],"sources":["/home/innofied/Desktop/Hackathon/src/components/Profile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Calendar from './Calendar';\r\nimport Event from './Event';\r\nimport CreateEvent from './CreateEvent';\r\n\r\n// Import fireStore reference from firebaseInit file\r\nimport { db } from '../firebase-init';\r\n\r\n// Import all the required functions from fireStore\r\nimport { collection, getDocs, where, query, deleteDoc } from 'firebase/firestore';\r\n\r\nconst Profile = ({ currentUser }) => {\r\n  const [events, setEvents] = useState();\r\n  const [selfEvents, setSelfEvents] = useState();\r\n  const [activeTab, setActiveTab] = useState('managing');\r\n\r\n  // Function to fetch events data from the \"Events\" collection based on event IDs\r\n  const fetchEventsData = async (eventIDs = []) => {\r\n    const eventsData = [];\r\n\r\n    for (const eventId of eventIDs) {\r\n      try {\r\n        const eventsCollection = collection(db, 'Events');\r\n        const q = query(eventsCollection, where('uid', '==', currentUser.uid));\r\n\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        querySnapshot.forEach((doc) => {\r\n          eventsData.push({ ...doc.data(), id: doc.id });\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching events data:', error);\r\n      }\r\n    }\r\n\r\n    return eventsData;\r\n  };\r\n\r\n  // Function to handle event deletion\r\n  const handleEventDelete = async (eventId) => {\r\n    try {\r\n      // Delete the event from the \"managed\" array in the user document\r\n      const userDocRef = collection(db, 'Users', currentUser.uid);\r\n      await deleteDoc(userDocRef);\r\n\r\n      // Fetch and update the self-managed events data\r\n      const updatedSelfEvents = await fetchEventsData(currentUser.events);\r\n      setSelfEvents(updatedSelfEvents);\r\n\r\n      // Fetch and update the attended events data\r\n      const updatedAttendedEvents = await fetchEventsData(currentUser.attended);\r\n      setEvents(updatedAttendedEvents);\r\n    } catch (error) {\r\n      console.error('Error deleting event:', error);\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (tab) => {\r\n    setActiveTab(tab);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Fetch attended events data\r\n    fetchEventsData(currentUser.attended).then((eventsData) => {\r\n      setEvents(eventsData);\r\n    });\r\n\r\n    // Fetch self-managed events data\r\n    fetchEventsData(currentUser.events).then((eventsData) => {\r\n      setSelfEvents(eventsData);\r\n    });\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <ul className=\"nav nav-tabs\">\r\n        {/* ... existing code ... */}\r\n      </ul>\r\n\r\n      <div className=\"mt-3\">\r\n        {activeTab === 'managing' && (\r\n          <div className=\"row\">\r\n            {selfEvents &&\r\n              selfEvents.map((event, index) => (\r\n                <div key={index} className=\"col-md-12 mb-4\">\r\n                  <Event event={event} onDelete={() => handleEventDelete(event.id)} />\r\n                </div>\r\n              ))}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'attending' && (\r\n          <div className=\"row\">\r\n            {events &&\r\n              events.map((event, index) => (\r\n                <div key={index} className=\"col-md-12 mb-4\">\r\n                  <Event event={event} onDelete={() => handleEventDelete(event.id)} />\r\n                </div>\r\n              ))}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'upcoming' && <Calendar user={currentUser} />}\r\n        {activeTab === 'create' && <CreateEvent user={currentUser} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}